{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { isLeaf, restoreCompatibleValue } from '../util';\n\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\n\nvar defaultRender = function defaultRender(inputValue, path, prefixCls, fieldNames) {\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\n\nexport default function useSearchResult(resultConfig) {\n  var searchConfig = resultConfig.searchConfig,\n      flattenOptions = resultConfig.flattenOptions,\n      fieldNames = resultConfig.fieldNames,\n      changeOnSelect = resultConfig.changeOnSelect,\n      searchValue = resultConfig.searchValue,\n      prefixCls = resultConfig.prefixCls; // ============================== MISC ==============================\n\n  var filterOption = searchConfig.filter || defaultFilter;\n  var renderOption = searchConfig.render || defaultRender; // ============================= Filter =============================\n  // Do filter\n\n  var filteredEntityList = React.useMemo(function () {\n    if (!searchValue) {\n      return [];\n    } // Normalize list\n\n\n    var normalizeList = flattenOptions.map(function (option) {\n      var _restoreCompatibleVal = restoreCompatibleValue(option, fieldNames),\n          options = _restoreCompatibleVal.options;\n\n      var originOptionList = options.map(function (opt) {\n        return opt.node;\n      });\n      return {\n        option: option,\n        originOptionList: originOptionList\n      };\n    }); // Not keep parent node when !changeOnSelect\n\n    if (!changeOnSelect) {\n      normalizeList = normalizeList.filter(function (_ref2) {\n        var option = _ref2.option;\n        return isLeaf(option.data);\n      });\n    } // Filter\n\n\n    var filteredList = [];\n\n    for (var i = 0; i < normalizeList.length; i += 1) {\n      // Perf saving if enabled\n      if (!searchConfig.sort && filteredList.length >= searchConfig.limit) {\n        break;\n      } // Do filter\n\n\n      var optGrp = normalizeList[i];\n\n      if (filterOption(searchValue, optGrp.originOptionList, fieldNames)) {\n        filteredList.push(optGrp);\n      }\n    } // Sort: When searchConfig.sort is enabled. We have to filter all the list\n\n\n    if (searchConfig.sort) {\n      filteredList.sort(function (a, b) {\n        return searchConfig.sort(a.originOptionList, b.originOptionList, searchValue, fieldNames);\n      });\n    }\n\n    return filteredList;\n  }, [flattenOptions, fieldNames, searchValue, filterOption, changeOnSelect, searchConfig]); // ======================== Generate Options ========================\n  // Wrap with connected label\n\n  var options = React.useMemo(function () {\n    return filteredEntityList.map(function (_ref3) {\n      var option = _ref3.option,\n          originOptionList = _ref3.originOptionList;\n      var title = renderOption(searchValue, originOptionList, prefixCls, fieldNames);\n      return _objectSpread(_objectSpread({}, option.data), {}, {\n        title: title\n      });\n    });\n  }, [searchValue, renderOption, filteredEntityList, fieldNames, prefixCls]);\n  return options;\n}","map":{"version":3,"names":["_objectSpread","React","isLeaf","restoreCompatibleValue","defaultFilter","search","options","_ref","label","some","opt","String","toLowerCase","includes","defaultRender","inputValue","path","prefixCls","fieldNames","map","join","useSearchResult","resultConfig","searchConfig","flattenOptions","changeOnSelect","searchValue","filterOption","filter","renderOption","render","filteredEntityList","useMemo","normalizeList","option","_restoreCompatibleVal","originOptionList","node","_ref2","data","filteredList","i","length","sort","limit","optGrp","push","a","b","_ref3","title"],"sources":["C:/Users/hp/Desktop/Assignments-2022/moviestips/node_modules/rc-cascader/es/hooks/useSearchResult.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { isLeaf, restoreCompatibleValue } from '../util';\n\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\n\nvar defaultRender = function defaultRender(inputValue, path, prefixCls, fieldNames) {\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\n\nexport default function useSearchResult(resultConfig) {\n  var searchConfig = resultConfig.searchConfig,\n      flattenOptions = resultConfig.flattenOptions,\n      fieldNames = resultConfig.fieldNames,\n      changeOnSelect = resultConfig.changeOnSelect,\n      searchValue = resultConfig.searchValue,\n      prefixCls = resultConfig.prefixCls; // ============================== MISC ==============================\n\n  var filterOption = searchConfig.filter || defaultFilter;\n  var renderOption = searchConfig.render || defaultRender; // ============================= Filter =============================\n  // Do filter\n\n  var filteredEntityList = React.useMemo(function () {\n    if (!searchValue) {\n      return [];\n    } // Normalize list\n\n\n    var normalizeList = flattenOptions.map(function (option) {\n      var _restoreCompatibleVal = restoreCompatibleValue(option, fieldNames),\n          options = _restoreCompatibleVal.options;\n\n      var originOptionList = options.map(function (opt) {\n        return opt.node;\n      });\n      return {\n        option: option,\n        originOptionList: originOptionList\n      };\n    }); // Not keep parent node when !changeOnSelect\n\n    if (!changeOnSelect) {\n      normalizeList = normalizeList.filter(function (_ref2) {\n        var option = _ref2.option;\n        return isLeaf(option.data);\n      });\n    } // Filter\n\n\n    var filteredList = [];\n\n    for (var i = 0; i < normalizeList.length; i += 1) {\n      // Perf saving if enabled\n      if (!searchConfig.sort && filteredList.length >= searchConfig.limit) {\n        break;\n      } // Do filter\n\n\n      var optGrp = normalizeList[i];\n\n      if (filterOption(searchValue, optGrp.originOptionList, fieldNames)) {\n        filteredList.push(optGrp);\n      }\n    } // Sort: When searchConfig.sort is enabled. We have to filter all the list\n\n\n    if (searchConfig.sort) {\n      filteredList.sort(function (a, b) {\n        return searchConfig.sort(a.originOptionList, b.originOptionList, searchValue, fieldNames);\n      });\n    }\n\n    return filteredList;\n  }, [flattenOptions, fieldNames, searchValue, filterOption, changeOnSelect, searchConfig]); // ======================== Generate Options ========================\n  // Wrap with connected label\n\n  var options = React.useMemo(function () {\n    return filteredEntityList.map(function (_ref3) {\n      var option = _ref3.option,\n          originOptionList = _ref3.originOptionList;\n      var title = renderOption(searchValue, originOptionList, prefixCls, fieldNames);\n      return _objectSpread(_objectSpread({}, option.data), {}, {\n        title: title\n      });\n    });\n  }, [searchValue, renderOption, filteredEntityList, fieldNames, prefixCls]);\n  return options;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}